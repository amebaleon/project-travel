## 1. 프로젝트 개요 및 목표

| 항목              | 상세 내용                                                                                                                                                                                               |
| :---------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **프로젝트 목표** | 한국을 방문하는 개별 여행객(FIT)의 **복합 사용자 페르소나(나이, 성별, 관심사)**에 맞춰, **GPT-5 mini 기반 Agent**를 활용하여 신뢰성(실시간 검증)이 보장된 맞춤형 관광 일정을 추천하는 풀스택 웹 서비스. |
| **개발 목표**     | React + Bootstrap, FastAPI, MariaDB, LangChain Agent를 모두 포함한 **1개월 내 개발 완료** 및 포트폴리오 시연.                                                                                           |
| **핵심 기술**     | **Tour API 통합 캐싱 (APScheduler)** 및 **GPT-5 mini Agent를 이용한 실시간 웹 검증 (Tool Use)**.                                                                                                        |

---

## 2. 기술 스택 및 라이브러리

### 2.1. 프론트엔드 (React + Bootstrap)

| 기술                                | 역할                                                    |
| :---------------------------------- | :------------------------------------------------------ |
| **React**                           | 기반의 사용자 인터페이스 구축.                          |
| **Bootstrap** / **react-bootstrap** | 반응형 웹 디자인 및 UI 컴포넌트(카드, 폼) 구현.         |
| **react-kakao-maps-sdk**            | 추천 결과를 지도 위에 시각화하여 동선 파악 용이성 확보. |

### 2.2. 백엔드 (FastAPI + Python Core Libraries)

| 라이브러리              | 역할 (프로젝트 핵심 기능)                                           | 전문성/보안        |
| :---------------------- | :------------------------------------------------------------------ | :----------------- |
| **FastAPI, uvicorn**    | 비동기 기반의 고성능 API 서버 구축.                                 | 필수               |
| **pydantic**            | **AI JSON 응답 검증** 및 API 입출력 데이터의 안정적인 구조화.       | **AI 통합 필수**   |
| **python-dotenv**       | OpenAI 키, DB 비밀번호 등 **민감 정보**를 코드 외부(`.env`)로 분리. | **보안 표준 필수** |
| **APScheduler**         | Tour API 데이터를 **주 1회 DB에 자동 업데이트**하는 스케줄링.       | 자동화 필수        |
| **SQLAlchemy, PyMySQL** | MariaDB ORM 연동 및 데이터베이스 접근.                              | 필수               |

### 2.3. AI 및 Agent 시스템

| 기술                | 모델                       | 역할                                                          |
| :------------------ | :------------------------- | :------------------------------------------------------------ |
| **LLM Engine**      | **OpenAI GPT-5 mini**      | 복합 추론 (나이/성별/관심사 기반 추천) 및 콘텐츠 생성.        |
| **Agent Framework** | **LangChain**              | LLM에 **외부 도구(Tool)** 사용 능력을 부여하여 에이전트 구축. |
| **Tool**            | **DuckDuckGo Search Tool** | 실시간 웹 검색을 통한 정보 **검증 및 최신성 확보**.           |

---

## 3. 기능 및 데이터 관리

### 3.1. 사용자 입력 (AI 추론의 5가지 핵심 데이터)

| 입력 항목     | 데이터 타입            | 특이 사항                                              |
| :------------ | :--------------------- | :----------------------------------------------------- |
| **지역**      | 문자열 (선택)          | 서울, 부산, 전주, 제주 4개 지역 중 택 1.               |
| **여행 일정** | 날짜 (시작일/종료일)   | 추천 기간 내 **축제/행사 데이터의 유효성** 검증.       |
| **나이**      | **정수 (텍스트 입력)** | 연령대별 선호 경향(트렌디/역사 등) 반영의 핵심 데이터. |
| **성별**      | 문자열 (선택)          | 성별 선호도 반영.                                      |
| **관심사**    | 문자열 리스트 (선택)   | 추천 콘텐츠 유형 결정 (음식, 문화, 자연, 쇼핑).        |

### 3.2. 데이터 캐싱 및 DB 스키마

- **데이터 소스:** 한국관광공사 **Tour API**의 국문 관광정보 서비스(모든 콘텐츠 유형 통합).
- **캐싱 전략:** **APScheduler**를 사용하여 **주 1회(Weekly)** 자동 업데이트.
- **핵심 필드:**
  - **`is_variable` (BOOLEAN):** 정보 변동성이 높은 항목(축제, 소규모 음식점 등)을 **TRUE**로 플래그하여 **Agent 검증 대상**으로 지정.
  - **`content_type`:** 관광지, 축제, 음식점, 숙박 등 Tour API의 분류 코드.

### 3.3. AI 동작 방식 및 검증 로직

1.  **데이터 통합:** DB 캐싱 데이터와 **사용자 입력(나이 포함)**을 결합하여 GPT-5 mini에게 전달.
2.  **추천 생성:** AI는 복합 추론을 통해 **Pydantic으로 정의된 JSON 형식**의 추천 목록을 생성.
3.  **실시간 검증 (Agent):**
    - AI는 추천 목록 중 **`is_variable=TRUE`** 항목에 대해 **LangChain Agent (DuckDuckGo Search Tool)**를 호출.
    - **검증 목표:** 현재 **운영/오픈 여부 (폐업, 취소)** 및 **최신 가격/운영 시간** 검증.
    - **안전 장치:** Agent 호출에 **최대 5초 타임아웃**을 설정. 실패 시 DB 캐시 정보를 사용하며 경고 문구 표시.
4.  **로깅 및 투명성:** **`ai_log`** 테이블에 사용자 입력 및 **`agent_search_log` (검증 기록)**를 저장하여 **AI의 추론 근거를 투명하게 시각화**할 수 있는 기반 마련.

---

## 4. UI/UX 및 시각화

- **디자인:** Bootstrap 기반의 반응형 레이아웃.
- **추천 화면:** 지도(Kakao Map)와 카드(Bootstrap) 형식을 동시에 제공하여 동선 계획을 돕고, 각 카드에 **Agent의 검증 결과 (예: '실시간 확인 완료' 뱃지)** 표시.
- **이미지 처리:** Tour API 대표 이미지 활용. 이미지가 없을 경우 Placeholder 이미지 사용.
- **피드백 기능:** "이 장소 제외하고 다시 추천" 버튼을 통해 AI에게 추가 프롬프트 전송 기능 구현.
